{"version":3,"sources":["main.js"],"names":["console","log","Main","evt","responseInfo","detail","mapCenter","center","preventDefault","query","target","querySelector","value","searchInfo","latitude","lat","longitude","lng","searchEvent","CustomEvent","document","dispatchEvent","results","articleContainer","createElement","setAttribute","classResults","appendChild","i","length","business","name","photo","image_url","price","rating","transactionType","transactions","businessItemEl","nameEl","textContent","location","display_address","locationEl","photoEl","category","categories","categoryEl","map","cat","title","join","priceEL","ratingEl","transactionEL","markerInfo","coordinates","windowContent","innerHTML","setUpListener","getMapCenter","form","addEventListener","handleSearch","handleMapCenterResponse","handleResults"],"mappings":"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","sourcesContent":["console.log(` \nChange this message, and make sure it changes in the browser \nto verify that you're working in the right files.`)\nclass Main{\n    constructor () {\n        \n        this.setUpListener()\n        // this.getMapCenter()\n        \n    }\n    getMapCenter(){\n        const getMapCenter = new CustomEvent('get-map-center')\n        document.dispatchEvent(getMapCenter)\n    }\n    setUpListener(){\n        const form = document.querySelector('form[name=\"business-search\"]')\n        form.addEventListener('submit', this.handleSearch)\n\n        document.addEventListener('get-map-center-response', this.handleMapCenterResponse)\n        document.addEventListener('map-ready', this.getMapCenter)\n        document.addEventListener('business-search-results', this.handleResults)\n\n    }\n\n    handleMapCenterResponse = (evt) =>{\n        const responseInfo = evt.detail\n        console.log(evt)\n        this.mapCenter = responseInfo.center\n    }\n\n    handleSearch = (evt) => {\n        evt.preventDefault()\n        console.log(evt.detail)\n        const query = evt.target.querySelector('input[name=\"place\"]').value\n        console.log('query', query, this.mapCenter)\n\n        const searchInfo = { \n            query: query, \n            latitude: this.mapCenter.lat(),\n            longitude: this.mapCenter.lng(),\n        }\n        const searchEvent = new CustomEvent('business-search', { detail: searchInfo })\n        document.dispatchEvent(searchEvent)\n\n    }\n\n    handleResults = (evt) => {\n       const results = evt.detail.results\n       console.log(results)\n       //parent container\n\n       const articleContainer = document.createElement('div');\n       articleContainer.setAttribute('class', 'business-Container');\n       const classResults = document.querySelector('.classResults')\n       classResults.appendChild( articleContainer);\n\n       //loop for businesses\n      \n       for (let i = 0; i < results.length; i++ ){\n\n\n           const business = results[i]\n           const name = business.name\n           const photo = business.image_url\n           const price = business.price\n           const rating = business.rating\n           const transactionType = business.transactions\n           \n\n           // Business Item\n           const businessItemEl = document.createElement('div');\n           businessItemEl.setAttribute('class', 'business-item');\n           articleContainer.appendChild(businessItemEl);\n\n           //Name\n           const nameEl = document.createElement('h2');\n           businessItemEl.appendChild(nameEl);\n           nameEl.textContent = name;\n\n           //location \n           const location = business.location.display_address\n           const locationEl =document.createElement('h3');\n           businessItemEl.appendChild(locationEl);\n           locationEl.textContent = location;\n\n           //image \n           const photoEl = document.createElement('img');\n           businessItemEl.appendChild(photoEl);\n           photoEl.setAttribute('src', photo);\n\n           //categories\n           const category = business.categories\n           const categoryEl = document.createElement('h4');\n           businessItemEl.appendChild(categoryEl);\n           categoryEl.textContent = category.map((cat) => cat.title).join('\\n');\n           businessItemEl.appendChild(categoryEl);\n\n           //price\n           const priceEL = document.createElement('p');\n           priceEL.setAttribute('class', 'dollar-sign-price');\n           businessItemEl.appendChild(priceEL);\n           priceEL.textContent = price;\n\n           //rating\n           const ratingEl = document.createElement('p');\n           ratingEl.setAttribute('class', 'rating');\n           businessItemEl.appendChild(ratingEl);\n           ratingEl.textContent = rating + 'ðŸ˜‰';\n\n           //transaction\n           const transactionEL = document.createElement('p');\n           transactionEL.setAttribute('class', 'transaction_type');\n           businessItemEl.appendChild(transactionEL);\n           transactionEL.textContent = transactionType;\n\n           const markerInfo = { \n            lat: business.coordinates.latitude,\n            lng: business.coordinates.longitude,\n            title: business.name,\n            windowContent: businessItemEl.innerHTML\n            // windowContent: `<h2>${business.name}</h2><h2>${business.image_url}</h2>`\n            }\n\n            const searchEvent = new CustomEvent('add-marker', { detail: markerInfo })\n            document.dispatchEvent(searchEvent)\n\n       }\n    }\n\n\n}\n\nnew Main()"],"file":"main.js"}